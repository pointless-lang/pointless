x = 0

fn foo()
  print(x)
end

foo()

x = 1

foo()

y = 0

bar = fn() print(y) end

bar()

y = 1

bar()

fs = []

for n in range(10) do
  fs |= push(fn() print(n) end)
end

for f in fs do
  f()
end
